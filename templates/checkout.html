<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Checkout - Divya Vastram</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .form-section {
        background: #ffffff;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body class="bg-light">

<div class="container py-4">
    <h2 class="mb-4 text-center">ðŸ§¾ Checkout</h2>

    <form method="POST" action="{{ url_for('checkout') }}" enctype="multipart/form-data" onsubmit="clearLocalFormData()">
        <div class="row justify-content-center">
            <div class="col-md-8 form-section">
                <div class="mb-3">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-control" name="name" required id="nameInput">
                </div>
                <div class="mb-3">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" class="form-control" name="phone" required id="phoneInput">
                </div>
                <div class="mb-3">
                    <label class="form-label">Shipping Address</label>
                    <textarea class="form-control" name="address" required rows="3" id="addressInput"></textarea>
                </div>
                <div class="mb-3">
                    <label class="form-label">Pincode</label>
                    <input type="text" class="form-control" name="pincode" required id="pincodeInput">
                </div>

                <div class="text-end">
                    <button type="submit" class="btn btn-success w-100">âœ… Confirm Order</button>
                </div>
            </div>
        </div>
    </form>
</div>

<script>
// ðŸŒŸ Save form data to localStorage
function saveFormData() {
    const data = {
        name: document.getElementById("nameInput").value,
        phone: document.getElementById("phoneInput").value,
        address: document.getElementById("addressInput").value,
        pincode: document.getElementById("pincodeInput").value
    };
    localStorage.setItem("checkout_form", JSON.stringify(data));
}

// âª Restore form data on load
function loadFormData() {
    const saved = localStorage.getItem("checkout_form");
    if (saved) {
        const data = JSON.parse(saved);
        document.getElementById("nameInput").value = data.name || "";
        document.getElementById("phoneInput").value = data.phone || "";
        document.getElementById("addressInput").value = data.address || "";
        document.getElementById("pincodeInput").value = data.pincode || "";
    }
}

// ðŸ§¼ Clear after submission
function clearLocalFormData() {
    localStorage.removeItem("checkout_form");
}

// ðŸ”„ Auto-save every time something changes
document.addEventListener("DOMContentLoaded", () => {
    loadFormData();
    document.querySelectorAll("input, textarea").forEach(el => {
        el.addEventListener("input", saveFormData);
    });
});
</script>

</body>
</html>
